<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Birthday Card</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css?family=Nobile:400italic,700italic|Dancing+Script" rel="stylesheet">

<style>
* {
  box-sizing: border-box;
}

:root {
  --heart-icon-color: #ff6058;
  --heart-icon-size: 80px;
}

body {
  margin: 0;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background-image: url("https://st2.depositphotos.com/1002927/7601/v/950/depositphotos_76018329-stock-illustration-colored-balloons-left-side-cover.jpg");
  background-size: cover;
  background-repeat: no-repeat;
  font-family: 'Nobile', sans-serif;
}

/* Card layout */
#card {
  width: 800px;
  height: 480px;
  position: relative;
  perspective: 5000px;
  transform: translateY(-10px);
}

#card-front, #card-inside {
  width: 50%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 50%;
  box-shadow: 2px 2px 30px rgba(0,0,0,.25);
}

/* Front */
#card-front {
  background: linear-gradient(#ED4567, lightsteelblue);
  transform-origin: left;
  transition: transform 1s linear;
  border: 10px solid white;
}

#card-front h1 {
  text-align: center;
  color: white;
  font-size: 48px;
  margin-top: 60px;
}

#card-front button {
  position: absolute;
  bottom: 20px;
  right: -15px;
  background: red;
  color: white;
  font-size: 22px;
  border: none;
  padding: 10px 15px;
  cursor: pointer;
}

/* Inside */
#card-inside {
  background: #FFEFEF;
  padding: 20px;
  overflow-y: auto; /* FIXED */
}

.text pre {
  font-family: 'Dancing Script', cursive;
  font-size: 23px;
  line-height: 1.6;
  white-space: pre-wrap;
  max-height: 100%;
}

/* Open states */
#card.open-half #card-front {
  transform: rotateY(-90deg);
}

#card.open-fully #card-front {
  transform: rotateY(-180deg);
}

#close {
  display: none;
}

#card.open-fully #open {
  display: none;
}

#card.open-fully #close {
  display: block;
}

/* Heart */
.heart-icon {
  background-color: var(--heart-icon-color);
  width: var(--heart-icon-size);
  height: var(--heart-icon-size);
  margin: 40px auto;
  transform: rotate(-45deg);
  animation: heartbeat 1s infinite alternate;
}

.heart-icon::before,
.heart-icon::after {
  content: "";
  position: absolute;
  background-color: inherit;
  width: var(--heart-icon-size);
  height: var(--heart-icon-size);
  border-radius: 50%;
}

.heart-icon::before {
  top: -40px;
  left: 0;
}

.heart-icon::after {
  left: 40px;
  top: 0;
}

@keyframes heartbeat {
  to {
    transform: scale(1.2) rotate(-45deg);
  }
}
</style>
</head>

<body>

<div id="card">
  <div id="card-inside">
    <div class="text">
      <pre></pre>
    </div>
  </div>

  <div id="card-front">
    <h1>Happy Birthday!</h1>
    <div class="heart-icon"></div>
    <button id="open">&gt;</button>
    <button id="close">&lt;</button>
  </div>
</div>

<script>
(function () {
  const card = document.getElementById("card");
  const openBtn = document.getElementById("open");
  const closeBtn = document.getElementById("close");
  const pre = document.querySelector(".text pre");

  const message = `Hey Bismah,

Another year has passed,
and that itself is a blessing from Allah.

May this new year of your life
bring you good health,
peace of heart,
and success in what truly matters.

May Allah grant you barakah in your time,
strength in your efforts,
and ease in every difficulty.

Happy Birthday.
May Allah keep you in His protection
and fill your days with goodness.
`;

  let timer;
  let counter = 0;

  function startTyping() {
    counter = 0;
    pre.textContent = "";
    const interval = setInterval(() => {
      pre.textContent += message[counter];
      pre.scrollTop = pre.scrollHeight; // auto scroll
      counter++;
      if (counter >= message.length) clearInterval(interval);
    }, 60);
  }

  openBtn.onclick = () => {
    card.className = "open-half";
    clearTimeout(timer);
    timer = setTimeout(() => {
      card.className = "open-fully";
      startTyping();
    }, 1000);
  };

  closeBtn.onclick = () => {
    card.className = "open-half";
    clearTimeout(timer);
    timer = setTimeout(() => {
      card.className = "";
      pre.textContent = "";
    }, 1000);
  };
})();
</script>

</body>
</html>
